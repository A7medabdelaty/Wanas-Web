<div class="card listing-card border-0 shadow-sm h-100">
  <div class="img-wrapper">
    <img
      [src]="getSafeImageUrl(listing.mainPhotoUrl || listing.listingPhotos[0]?.url)"
      class="card-img-top listing-img"
      alt="Listing Image"
    />

    <div class="location-badge">
      <i class="bi bi-geo-alt-fill text-danger me-1"></i> {{ listing.city }}
    </div>
  </div>

  <div class="card-body p-4 d-flex flex-column">
    <div class="d-flex justify-content-between align-items-start mb-2">
      <h5 class="card-title fw-bold text-dark m-0 text-truncate" style="max-width: 65%">
        {{ listing.title }}
      </h5>
      <h5 class="fw-bold price-text m-0">
        {{ listing.monthlyPrice || listing.price }} <span class="fs-6 text-muted fw-normal">ج.م</span>
      </h5>
    </div>

    <p
      class="card-text text-muted small mb-4 line-clamp-2"
      style="
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      "
    >
      {{ listing.description }}
    </p>

    <div class="mt-auto">
      <a
        [routerLink]="['/listings', listing.id]"
        class="btn w-100 rounded-pill fw-bold py-2 btn-view-details"
      >
        عرض التفاصيل
      </a>
    </div>
  </div>
</div>
