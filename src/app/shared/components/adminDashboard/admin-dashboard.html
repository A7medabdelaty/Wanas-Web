<section class="admin-dashboard container-fluid py-4 px-lg-5 bg-light-subtle min-vh-100 font-cairo">
  @if (isRootAdmin()) {

  <div class="d-flex flex-wrap align-items-end justify-content-between mb-5 fade-in-down">
    <div>
      <div
        class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill mb-3 fw-bold border border-primary-subtle"
      >
        <i class="bi bi-shield-lock-fill me-2"></i>منطقة الإدارة العليا
      </div>
      <h1 class="fw-bold text-dark mb-1 ls-tight">
        {{ greeting }}, <span class="text-primary">Admin</span>
      </h1>
      <p class="text-muted fs-5 mb-0">إليك نظرة عامة على ما يحدث في نظامك اليوم.</p>
    </div>

    <div class="d-none d-md-block text-end">
      <div class="text-muted small fw-bold text-uppercase ls-1 mb-1">تاريخ اليوم</div>
      <div class="h5 fw-bold text-dark m-0 d-flex align-items-center gap-2">
        <i class="bi bi-calendar-event text-primary"></i>
        {{ today | date : 'fullDate' }}
      </div>
    </div>
  </div>

  <div class="row g-4 mb-5 fade-in-up">
    <div class="col-md-4">
      <div
        class="stat-card card-hover bg-white p-4 rounded-4 shadow-sm h-100 border-bottom-primary position-relative overflow-hidden"
      >
        <div class="d-flex justify-content-between align-items-start z-1 position-relative">
          <div>
            <p class="text-muted small fw-bold text-uppercase ls-1 mb-2">إجمالي المستخدمين</p>
            <h2 class="fw-bolder text-dark mb-2">{{ usersCounts.owners + usersCounts.renters }}</h2>
            <div class="badge bg-success bg-opacity-10 text-success rounded-pill px-2 py-1">
              <i class="bi bi-arrow-up-right small"></i> مستخدم
            </div>
          </div>
          <div class="icon-shape bg-primary bg-opacity-10 text-primary rounded-4">
            <i class="bi bi-people-fill fs-4"></i>
          </div>
        </div>
        <i
          class="bi bi-people-fill position-absolute opacity-05 text-primary"
          style="font-size: 8rem; bottom: -2rem; left: -2rem; z-index: 0"
        ></i>
      </div>
    </div>

    <div class="col-md-4">
      <div
        class="stat-card card-hover bg-white p-4 rounded-4 shadow-sm h-100 border-bottom-danger position-relative overflow-hidden"
      >
        <div class="d-flex justify-content-between align-items-start z-1 position-relative">
          <div> 
            <p class="text-muted small fw-bold text-uppercase ls-1 mb-2">بلاغات معلقة</p>
            <h2 class="fw-bolder text-dark mb-2">{{ adminReportCounts.pendingCount || 0 }}</h2>
            <div class="badge bg-danger bg-opacity-10 text-danger rounded-pill px-2 py-1">
              <i class="bi bi-exclamation-circle small"></i> يتطلب إجراء
            </div>
          </div>
          <div class="icon-shape bg-danger bg-opacity-10 text-danger rounded-4">
            <i class="bi bi-flag-fill fs-4"></i>
          </div>
        </div>
        <i
          class="bi bi-flag-fill position-absolute opacity-05 text-danger"
          style="font-size: 8rem; bottom: -2rem; left: -2rem; z-index: 0"
        ></i>
      </div>
    </div>

    <div class="col-md-4">
      <div
        class="stat-card card-hover bg-white p-4 rounded-4 shadow-sm h-100 border-bottom-success position-relative overflow-hidden"
      >
        <div class="d-flex justify-content-between align-items-start z-1 position-relative">
          <div>
            <p class="text-muted small fw-bold text-uppercase ls-1 mb-2">
              نسبة البلاغات المُراجَعة
            </p>
            <h2 class="fw-bolder text-dark mb-2">{{ triagedPercent }}%</h2>
            <div class="badge bg-success bg-opacity-10 text-success rounded-pill px-2 py-1">
              <i class="bi bi-check-circle small"></i> مُراجَعة
            </div>
          </div>
          <div class="icon-shape bg-success bg-opacity-10 text-success rounded-4">
            <i class="bi bi-activity fs-4"></i>
          </div>
        </div>
        <i
          class="bi bi-activity position-absolute opacity-05 text-success"
          style="font-size: 8rem; bottom: -2rem; left: -2rem; z-index: 0"
        ></i>
      </div>
    </div>
  </div>

  <div class="position-relative mb-4 fade-in-up" style="z-index: 1020">
    <div
      class="glass-nav p-2 rounded-4 shadow-sm border border-white d-flex justify-content-between align-items-center"
    >
      <nav class="nav nav-pills nav-fill flex-nowrap custom-scrollbar overflow-auto">
        <a
          class="nav-link rounded-pill fw-bold small px-3 mx-1 d-flex align-items-center gap-2"
          routerLink="/admin"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <i class="bi bi-grid-fill"></i> <span>الرئيسية</span>
        </a>
        <a
          class="nav-link rounded-pill fw-bold small px-3 mx-1 d-flex align-items-center gap-2"
          routerLink="/admin/reports"
          routerLinkActive="active"
        >
          <i class="bi bi-file-earmark-text-fill"></i> <span>البلاغات</span>
          <span class="badge bg-danger rounded-circle ms-1" style="font-size: 0.6em">15</span>
        </a>
        <a
          class="nav-link rounded-pill fw-bold small px-3 mx-1 d-flex align-items-center gap-2"
          routerLink="/admin/users"
          routerLinkActive="active"
        >
          <i class="bi bi-people-fill"></i> <span>المستخدمين</span>
        </a>
        <a
          class="nav-link rounded-pill fw-bold small px-3 mx-1 d-flex align-items-center gap-2"
          routerLink="/admin/settings"
          routerLinkActive="active"
        >
          <i class="bi bi-gear-fill"></i> <span>الإعدادات</span>
        </a>
      </nav>

      <div class="d-none d-md-flex ps-3 border-start border-secondary border-opacity-10">
        <button class="btn btn-light btn-icon rounded-circle shadow-sm me-2" title="تحديث">
          <i class="bi bi-arrow-clockwise text-secondary"></i>
        </button>
      </div>
    </div>
  </div>
  }
  <div class="content-wrapper position-relative" style="min-height: 50vh">
    <router-outlet></router-outlet>
  </div>
</section>
