<div class="profile-form-container">
  <h2 class="form-title">ุฅููุงู ุงูููู ุงูุดุฎุตู</h2>
  <p class="form-description">ุฃุถู ูุนูููุงุชู ุงูุฃุณุงุณูุฉ ูุจูุงุก ูููู ุงูุดุฎุตู</p>

  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">
    <!-- Age Input -->
    <div class="form-group">
      <label for="age" class="form-label">ุงูุนูุฑ *</label>
      <input
        type="number"
        id="age"
        formControlName="age"
        class="form-control"
        placeholder="ุฃุฏุฎู ุนูุฑู"
        [class.invalid]="profileForm.get('age')?.invalid && profileForm.get('age')?.touched"
      />
      @if (profileForm.get('age')?.invalid && profileForm.get('age')?.touched) {
        <div class="error-message">
          @if (profileForm.get('age')?.errors?.['required']) {
            <span>ุงูุนูุฑ ูุทููุจ</span>
          }
          @if (profileForm.get('age')?.errors?.['min']) {
            <span>ุงูุนูุฑ ูุฌุจ ุฃู ูููู 18 ุณูุฉ ุนูู ุงูุฃูู</span>
          }
          @if (profileForm.get('age')?.errors?.['max']) {
            <span>ุงูุนูุฑ ูุฌุจ ุฃู ูููู 100 ุณูุฉ ูุญุฏ ุฃูุตู</span>
          }
        </div>
      }
    </div>

    <!-- Bio Textarea -->
    <div class="form-group">
      <label for="bio" class="form-label">
        ูุจุฐุฉ ุนูู *
        <span class="char-count">{{ getBioCharCount() }}/500</span>
      </label>
      <textarea
        id="bio"
        formControlName="bio"
        class="form-control textarea"
        rows="4"
        placeholder="ุงูุชุจ ูุจุฐุฉ ูุฎุชุตุฑุฉ ุนูู..."
        [class.invalid]="profileForm.get('bio')?.invalid && profileForm.get('bio')?.touched"
      ></textarea>
      @if (profileForm.get('bio')?.invalid && profileForm.get('bio')?.touched) {
        <div class="error-message">
          @if (profileForm.get('bio')?.errors?.['required']) {
            <span>ุงููุจุฐุฉ ูุทููุจุฉ</span>
          }
          @if (profileForm.get('bio')?.errors?.['minlength']) {
            <span>ุงููุจุฐุฉ ูุฌุจ ุฃู ุชููู 10 ุฃุญุฑู ุนูู ุงูุฃูู</span>
          }
          @if (profileForm.get('bio')?.errors?.['maxlength']) {
            <span>ุงููุจุฐุฉ ูุฌุจ ุฃู ูุง ุชุชุฌุงูุฒ 500 ุญุฑู</span>
          }
        </div>
      }
    </div>

    <!-- Photo Upload -->
    <div class="form-group">
      <label class="form-label">ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ *</label>

      @if (!previewUrl()) {
        <div
          class="upload-area"
          (drop)="onFileDrop($event)"
          (dragover)="onDragOver($event)"
        >
          <div class="upload-icon">๐ท</div>
          <p class="upload-text">ุงุณุญุจ ุงูุตูุฑุฉ ููุง ุฃู</p>
          <label for="file-upload" class="upload-button">ุงุฎุชุฑ ุตูุฑุฉ</label>
          <input
            type="file"
            id="file-upload"
            accept="image/*"
            (change)="onFileSelected($event)"
            class="file-input"
          />
          <p class="upload-hint">PNG, JPG, GIF (ุญุฏ ุฃูุตู 5MB)</p>
        </div>
      } @else {
        <div class="preview-container">
          <img [src]="previewUrl()" alt="ูุนุงููุฉ ุงูุตูุฑุฉ" class="preview-image" />
          <button type="button" class="remove-button" (click)="removeFile()">
            โ ุฅุฒุงูุฉ
          </button>
        </div>
      }
    </div>

    <!-- Error Message -->
    @if (errorMessage()) {
      <div class="alert alert-error">
        {{ errorMessage() }}
      </div>
    }

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn btn-primary btn-block"
      [disabled]="isLoading()"
    >
      @if (isLoading()) {
        <span class="spinner"></span>
        <span>ุฌุงุฑู ุงูุญูุธ...</span>
      } @else {
        <span>ุงูุชุงูู</span>
      }
    </button>
  </form>
</div>
