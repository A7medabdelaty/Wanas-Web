<div class="owner-reservations-page">
  <div class="container py-4">
    <!-- Header -->
    <div class="page-header">
      <h1 class="page-title">
        <i class="bi bi-calendar-check"></i>
        حجوزات إعلاناتك
      </h1>
      <p class="page-description">جميع الحجوزات التي تم إجراؤها على الإعلانات الخاصة بك</p>
    </div>

    <!-- Loading State -->
    @if (loading) {
      <div class="loading-container">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">جاري التحميل...</span>
        </div>
      </div>
    }

    <!-- Reservations Grid -->
    @if (!loading) {
      @if (reservations.length > 0) {
        <div class="reservations-grid">
          @for (reservation of reservations; track reservation.id) {
            <div class="reservation-card" (click)="viewListing(reservation.listingId)">
              <div class="card-header">
                <div class="reservation-id">
                  <i class="bi bi-hash"></i>
                  <span>{{ reservation.id }}</span>
                </div>
                <span class="status-badge" [ngClass]="getPaymentStatusClass(reservation.paymentStatus)">
                  {{ getPaymentStatusText(reservation.paymentStatus) }}
                </span>
              </div>

              <div class="card-body">
                <div class="info-row">
                  <div class="info-item">
                    <i class="bi bi-building"></i>
                    <div>
                      <span class="label">رقم الإعلان</span>
                      <span class="value">#{{ reservation.listingId }}</span>
                    </div>
                  </div>

                  <div class="info-item">
                    <i class="bi bi-hospital-bed"></i>
                    <div>
                      <span class="label">عدد الأسرّة</span>
                      <span class="value">{{ reservation.bedIds.length }}</span>
                    </div>
                  </div>
                </div>

                <div class="beds-list">
                  <span class="beds-label">أرقام الأسرّة:</span>
                  <div class="bed-chips">
                    @for (bedId of reservation.bedIds; track bedId) {
                      <span class="bed-chip">#{{ bedId }}</span>
                    }
                  </div>
                </div>

                <div class="pricing-section">
                  <div class="price-row">
                    <span class="price-label">السعر الإجمالي:</span>
                    <span class="price-value">{{ reservation.totalPrice }} ج.م</span>
                  </div>
                  <div class="price-row">
                    <span class="price-label">مبلغ العربون:</span>
                    <span class="deposit-value">{{ reservation.depositAmount }} ج.م</span>
                  </div>
                </div>
              </div>

              <div class="card-footer">
                <button class="btn-view-listing">
                  <i class="bi bi-eye"></i>
                  عرض الإعلان
                </button>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">
            <i class="bi bi-inbox"></i>
          </div>
          <h3>لا توجد حجوزات بعد</h3>
          <p>عندما يقوم المستخدمون بحجز إعلاناتك، ستظهر هنا</p>
        </div>
      }
    }
  </div>
</div>
