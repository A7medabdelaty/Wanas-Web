<div class="preferences-form-container">
  <h2 class="form-title">ุฅุถุงูุฉ ุงูุชูุถููุงุช</h2>
  <p class="form-description">ุณุงุนุฏูุง ูู ุฅูุฌุงุฏ ุฃูุถู ุดุฑูู ุณูู ูู</p>

  <form [formGroup]="preferencesForm" (ngSubmit)="onSubmit()" class="preferences-form">
    <!-- Location Section -->
    <div class="form-section">
      <h3 class="section-title">๐ ุงููููุน</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="city" class="form-label">ุงููุฏููุฉ *</label>
          <input
            type="text"
            id="city"
            formControlName="city"
            class="form-control"
            placeholder="ูุซุงู: ุงููุงูุฑุฉ"
            [class.invalid]="preferencesForm.get('city')?.invalid && preferencesForm.get('city')?.touched"
          />
        </div>
      </div>
    </div>

    <!-- Demographics Section -->
    <div class="form-section">
      <h3 class="section-title">๐ฅ ุชูุถููุงุชู ุงูุฎุงุตุฉ</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="minimumAge" class="form-label">ุงูุญุฏ ุงูุฃุฏูู ููุนูุฑ *</label>
          <input
            type="number"
            id="minimumAge"
            formControlName="minimumAge"
            class="form-control"
            placeholder="18"
          />
        </div>
        <div class="form-group">
          <label for="maximumAge" class="form-label">ุงูุญุฏ ุงูุฃูุตู ููุนูุฑ *</label>
          <input
            type="number"
            id="maximumAge"
            formControlName="maximumAge"
            class="form-control"
            placeholder="50"
          />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="gender" class="form-label">ุงูุฌูุณ ุงูููุถู *</label>
          <select id="gender" formControlName="gender" class="form-control">
            <option [value]="0">ุฐูุฑ</option>
            <option [value]="1">ุฃูุซู</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Budget Section -->
    <div class="form-section">
      <h3 class="section-title">๐ฐ ุงูููุฒุงููุฉ</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="minimumBudget" class="form-label">ุงูุญุฏ ุงูุฃุฏูู ููููุฒุงููุฉ *</label>
          <input
            type="number"
            id="minimumBudget"
            formControlName="minimumBudget"
            class="form-control"
            placeholder="0"
          />
        </div>
        <div class="form-group">
          <label for="maximumBudget" class="form-label">ุงูุญุฏ ุงูุฃูุตู ููููุฒุงููุฉ *</label>
          <input
            type="number"
            id="maximumBudget"
            formControlName="maximumBudget"
            class="form-control"
            placeholder="10000"
          />
        </div>
      </div>
    </div>

    <!-- Lifestyle Section -->
    <div class="form-section">
      <h3 class="section-title">๐ ููุท ุงูุญูุงุฉ</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="children" class="form-label">ูุฌูุฏ ุฃุทูุงู *</label>
          <select id="children" formControlName="children" class="form-control">
            <option [value]="0">ูุนู</option>
            <option [value]="1">ูุง</option>
            <option [value]="2">ูุง ููู</option>
          </select>
        </div>
        <div class="form-group">
          <label for="pets" class="form-label">ูุฌูุฏ ุญููุงูุงุช ุฃูููุฉ *</label>
          <select id="pets" formControlName="pets" class="form-control">
            <option [value]="0">ูุนู</option>
            <option [value]="1">ูุง</option>
            <option [value]="2">ูุง ููู</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="smoking" class="form-label">ุงูุชุฏุฎูู *</label>
          <select id="smoking" formControlName="smoking" class="form-control">
            <option [value]="0">ูุฏุฎู</option>
            <option [value]="1">ุบูุฑ ูุฏุฎู</option>
            <option [value]="2">ูุง ููู</option>
          </select>
        </div>
        <div class="form-group">
          <label for="visits" class="form-label">ุงูุฒูุงุฑุงุช *</label>
          <select id="visits" formControlName="visits" class="form-control">
            <option [value]="0">ูุณููุญ</option>
            <option [value]="1">ุบูุฑ ูุณููุญ/option>
            <option [value]="2">ูุง ููู</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="overnightGuests" class="form-label">ุงูุถููู ูููุงู *</label>
          <select id="overnightGuests" formControlName="overnightGuests" class="form-control">
            <option [value]="0">ูุณููุญ</option>
            <option [value]="1">ุบูุฑ ูุณููุญ</option>
            <option [value]="2">ูุง ููู</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Habits & Preferences Section -->
    <div class="form-section">
      <h3 class="section-title">โ๏ธ ุงูุนุงุฏุงุช ูุงูุชูุถููุงุช</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="sleepSchedule" class="form-label">ุฌุฏูู ุงูููู *</label>
          <select id="sleepSchedule" formControlName="sleepSchedule" class="form-control">
            <option [value]="0">ูุจูุฑ (ูุจู 10 ูุณุงุกู)</option>
            <option [value]="1">ูุชูุณุท (10-12 ูุณุงุกู)</option>
            <option [value]="2">ูุชุฃุฎุฑ (ุจุนุฏ 12 ูุณุงุกู)</option>
          </select>
        </div>
        <div class="form-group">
          <label for="socialLevel" class="form-label">ุงููุณุชูู ุงูุงุฌุชูุงุนู *</label>
          <select id="socialLevel" formControlName="socialLevel" class="form-control">
            <option [value]="0">ุงูุทูุงุฆู</option>
            <option [value]="1">ูุชูุณุท</option>
            <option [value]="2">ุงุฌุชูุงุนู</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="noiseToleranceLevel" class="form-label">ุชุญูู ุงูุถูุถุงุก *</label>
          <select id="noiseToleranceLevel" formControlName="noiseToleranceLevel" class="form-control">
            <option [value]="1">ููุฎูุถ</option>
            <option [value]="2">ูุชูุณุท</option>
            <option [value]="3">ุนุงูู</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Job & Education Section -->
    <div class="form-section">
      <h3 class="section-title">๐ผ ุงูุนูู ูุงูุชุนููู</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="job" class="form-label">ุงููุธููุฉ *</label>
          <input
            type="text"
            id="job"
            formControlName="job"
            class="form-control"
            placeholder="ูุซุงู: ูููุฏุณ ุจุฑูุฌูุงุช"
          />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input
              type="checkbox"
              formControlName="isStudent"
              class="checkbox-input"
            />
            <span>ุฃูุง ุทุงูุจ</span>
          </label>
        </div>
      </div>

      @if (isStudent) {
        <div class="form-row student-fields">
          <div class="form-group">
            <label for="university" class="form-label">ุงูุฌุงูุนุฉ *</label>
            <input
              type="text"
              id="university"
              formControlName="university"
              class="form-control"
              placeholder="ูุซุงู: ุฌุงูุนุฉ ุงููุงูุฑุฉ"
            />
          </div>
          <div class="form-group">
            <label for="major" class="form-label">ุงูุชุฎุตุต *</label>
            <input
              type="text"
              id="major"
              formControlName="major"
              class="form-control"
              placeholder="ูุซุงู: ุนููู ุงูุญุงุณุจ"
            />
          </div>
        </div>
      }
    </div>

    <!-- Error Message -->
    @if (errorMessage()) {
      <div class="alert alert-error" style="white-space: pre-line;">
        {{ errorMessage() }}
      </div>
    }

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn btn-primary btn-block"
      [disabled]="isLoading()"
    >
      @if (isLoading()) {
        <span class="spinner"></span>
        <span>ุฌุงุฑู ุงูุญูุธ...</span>
      } @else {
        <span>ุฅููุงุก</span>
      }
    </button>
  </form>
</div>
