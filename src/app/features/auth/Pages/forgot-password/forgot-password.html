<div class="login-page-container">
  <div class="login-card-wrapper">
    <!-- Image Side -->
    <div class="login-image-side">
      <img src="/images/login&signup.png" alt="Forgot Password Visual" class="side-image" onerror="this.style.display='none'" />
    </div>

    <!-- Form Side -->
    <div class="login-form-side">
      <div class="form-content">
        
        <!-- Form State -->
        <div *ngIf="!success">
          <h2>نسيت كلمة المرور؟</h2>
          <p class="subtitle">أدخل بريدك الإلكتروني وسنرسل لك رمز إعادة تعيين كلمة المرور.</p>

          <!-- Error Alert -->
          <div class="alert alert-error" *ngIf="errorMessage">
            {{ errorMessage }}
          </div>

          <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" novalidate>
            <!-- Email -->
            <div class="form-group">
              <label>البريد الإلكتروني</label>
              <input
                type="email"
                formControlName="email"
                placeholder="email@example.com"
              />
              <div class="error" *ngIf="hasError('email')">
                <span *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">البريد الإلكتروني مطلوب.</span>
                <span *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">صيغة البريد غير صحيحة.</span>
              </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" [disabled]="loading">
              <span *ngIf="!loading">إرسال رمز إعادة التعيين</span>
              <span *ngIf="loading">جاري الإرسال...</span>
            </button>

            <!-- Back to Login -->
            <div class="links">
              <a routerLink="/auth/login" class="small-link">العودة لتسجيل الدخول</a>
            </div>
          </form>
        </div>

        <!-- Success State -->
        <div *ngIf="success" class="success-container">
          <div class="success-icon">✓</div>
          <h2>تم إرسال الرمز بنجاح!</h2>
          <p class="subtitle">تحقق من بريدك الإلكتروني واستخدم الرمز لإعادة تعيين كلمة المرور.</p>
          <a routerLink="/auth/reset-password" class="btn-primary">
            إعادة تعيين كلمة المرور
          </a>
        </div>

      </div>
    </div>
  </div>
</div>