<div class="container">
  <div class="card">
    <img src="assets/images/logo.png" alt="Wanas Logo" class="logo" />

    <!-- Form State -->
    <div *ngIf="!success">
      <h2>إعادة تعيين كلمة المرور</h2>
      <p class="subtitle">أدخل كلمة المرور الجديدة الخاصة بك.</p>

      <!-- Error Alert -->
      <div class="alert alert-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" novalidate>
        <!-- New Password -->
        <label>كلمة المرور الجديدة</label>
        <input
          type="password"
          formControlName="newPassword"
          placeholder="••••••••"
        />
        <div class="error" *ngIf="hasError('newPassword')">
          <span *ngIf="resetPasswordForm.get('newPassword')?.errors?.['required']">كلمة المرور مطلوبة.</span>
          <span *ngIf="resetPasswordForm.get('newPassword')?.errors?.['minlength']">يجب أن تتكون كلمة المرور من 6 أحرف على الأقل.</span>
        </div>

        <!-- Confirm Password -->
        <label>تأكيد كلمة المرور</label>
        <input
          type="password"
          formControlName="confirmPassword"
          placeholder="••••••••"
        />
        <div class="error" *ngIf="hasError('confirmPassword')">
          <span *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['required']">تأكيد كلمة المرور مطلوب.</span>
          <span *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['passwordMismatch']">كلمات المرور غير متطابقة.</span>
        </div>

        <!-- Submit Button -->
        <button type="submit" [disabled]="loading">
          <span *ngIf="!loading">إعادة تعيين كلمة المرور</span>
          <span *ngIf="loading">جاري التعيين...</span>
        </button>

        <!-- Back to Login -->
        <div class="links">
          <a routerLink="/auth/login" class="small-link">العودة لتسجيل الدخول</a>
        </div>
      </form>
    </div>

    <!-- Success State -->
    <div *ngIf="success" class="success-container">
      <div class="success-icon">✓</div>
      <h2>تم إعادة تعيين كلمة المرور بنجاح!</h2>
      <p class="subtitle">يمكنك الآن تسجيل الدخول باستخدام كلمة المرور الجديدة.</p>
      <button (click)="goToLogin()" class="btn-primary">
        تسجيل الدخول
      </button>
    </div>
  </div>
</div>
